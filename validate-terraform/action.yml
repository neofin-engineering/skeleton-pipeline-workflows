# ğŸ“„ validate-terraform.yml
# Action: Executa a validaÃ§Ã£o do Terraform
# Objetivo: Executa a validaÃ§Ã£o do Terraform para garantir que a configuraÃ§Ã£o estÃ¡ correta
name: Validate Terraform configuration
description: "Executa a validaÃ§Ã£o do Terraform para garantir que a configuraÃ§Ã£o estÃ¡ correta."

inputs:
  terraform_path:
    description: Caminho para o diretÃ³rio com arquivos Terraform (default terraform)
    required: false
    default: terraform

runs:
  using: composite
  steps:
    # -------------------------------
    # ğŸ” VALIDAÃ‡ÃƒO DO TERRAFORM
    # -------------------------------
    # ğŸ—ï¸ ValidaÃ§Ãµes de sintaxe do Terraform
    - name: Validar sintaxe do Terraform
      shell: bash
      working-directory: ${{ inputs.terraform_path }}
      run: |
        echo "ğŸ” Executando validaÃ§Ã£o do Terraform em '${{ inputs.terraform_path }}'..."
        
        if terraform validate; then
          echo "âœ… ValidaÃ§Ã£o do Terraform concluÃ­da com sucesso."
        else
          echo "âŒ ValidaÃ§Ã£o do Terraform falhou. Corrija os erros antes de continuar."
          exit 1
        fi
